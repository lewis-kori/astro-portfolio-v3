---
import SideNav from '../SideNav.astro';
import { ArrowIcon } from '../ui/icons';
import { getEntry } from 'astro:content';

const aboutContent = await getEntry('about', 'about-content');
if (!aboutContent) {
  throw new Error('About content not found');
}

const { Content } = await aboutContent.render();
const { subtitle } = aboutContent.data;
---

<section class='py-20 relative' id='about'>
  <div
    class='absolute inset-0 bg-linear-to-br from-primary/5 via-transparent to-secondary/5 pointer-events-none'
  >
  </div>

  <div class='container-fluid relative'>
    <div>
      <h2
        class='text-4xl first-letter-color font-semibold text-foreground mb-3 text-center'
      >
        About me
      </h2>
      <div
        class='h-1 w-20 bg-linear-to-r from-primary to-secondary rounded-full mx-auto mb-16'
      >
      </div>
    </div>

    <div class='grid md:grid-cols-4 gap-16 items-start'>
      <div class='animate-slide-in-left hidden md:block md:sticky md:top-24'>
        <SideNav />
      </div>

      <div class='animate-slide-in-right space-y-8 md:col-span-3'>
        <p
          class='text-2xl font-medium text-foreground/80 mb-6 first-letter-color'
        >
          {subtitle}
        </p>
        <div
          class='max-w-none [&_p]:text-muted-foreground [&_p]:leading-relaxed [&_p]:mb-4 [&_h2]:text-2xl [&_h2]:font-semibold [&_h2]:text-foreground [&_h2]:mb-4 [&_h2]:mt-8 retro:[&_h2]:first-letter:text-primary [&_h2]:first-letter:text-secondary [&_h3]:text-lg [&_h3]:font-semibold [&_h3]:text-foreground [&_h3]:mb-3 [&_h3]:mt-6 [&_ul]:space-y-2 [&_ul]:ml-6 [&_ul]:list-disc [&_ol]:space-y-2 [&_ol]:ml-6 [&_ol]:list-decimal [&_li]:text-muted-foreground [&_strong]:text-foreground [&_strong]:font-semibold [&_a]:text-secondary retro:[&_a]:text-primary [&_a]:text-sm [&_a]:hover:underline [&_a]:inline-flex [&_a]:items-center [&_a]:gap-1 [&_a]:font-medium'
        >
          <Content />
        </div>

        <div class='flex flex-col md:flex-row gap-y-2 gap-x-4 pt-4'>
          <a
            href='/contact'
            class='inline-flex items-center justify-center gap-2 px-5 text-sm py-2.5 bg-primary text-background rounded-md font-medium hover:bg-primary/90 hover:scale-105 transition-all shadow-lg hover:shadow-xl'
          >
            Get In Touch
            <ArrowIcon />
          </a>
          <a
            href='#projects'
            class='inline-flex items-center justify-center gap-2 px-5 text-sm py-2.5 border border-primary text-primary rounded-md font-medium hover:bg-primary hover:text-background transition-all'
          >
            View Projects
          </a>
        </div>
      </div>
    </div>
  </div>
</section>
